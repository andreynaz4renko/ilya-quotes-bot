# Ilya Quotes Bot

Telegram инлайн-бот для цитат Ильи, написанный на TypeScript. Бот позволяет отправлять голосовые сообщения с цитатами через инлайн-режим в любом чате.

## Установка

1. Установите зависимости:

```bash
npm install
```

2. Создайте файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

3. Получите токен бота у [@BotFather](https://t.me/BotFather) и добавьте его в `.env`:

```
BOT_TOKEN=your_bot_token_here
```

4. (Опционально) Настройте файловый сервер:

Для работы инлайн-бота нужен публичный HTTPS URL для доступа к аудиофайлам. Есть два варианта:

**Вариант 1: Использование внешнего сервера**
```
FILES_BASE_URL=https://your-domain.com
```

**Вариант 2: Использование ngrok для разработки**
1. Установите [ngrok](https://ngrok.com/)
2. Запустите бота: `npm run dev`
3. В другом терминале запустите: `ngrok http 3001`
4. Скопируйте HTTPS URL из ngrok (например: `https://abc123.ngrok.io`)
5. Добавьте в `.env`: `FILES_BASE_URL=https://abc123.ngrok.io`

**Вариант 3: Локальный сервер (только для тестирования)**
Бот автоматически запустит локальный HTTP сервер на порту 3001, но он не будет работать с инлайн-ботом, так как Telegram требует HTTPS. Используйте ngrok для туннелирования.

## Разработка

Запуск в режиме разработки с автоперезагрузкой:

```bash
npm run dev
```

## Сборка

Скомпилировать TypeScript в JavaScript:

```bash
npm run build
```

Запуск скомпилированного бота:

```bash
npm start
```

## Структура проекта

```
├── src/
│   ├── index.ts      # Точка входа
│   └── bot.ts        # Основная логика бота
├── resources/        # Ресурсы (аудио файлы)
├── dist/            # Скомпилированный код (создается после сборки)
├── package.json
├── tsconfig.json
└── README.md
```

## Использование

После запуска бота используйте его в любом чате Telegram:

1. Начните вводить `@имя_вашего_бота` в поле ввода сообщения
2. Появится список всех доступных цитат
3. Можете ввести текст для поиска нужной цитаты
4. Выберите нужную цитату из списка
5. Голосовое сообщение будет отправлено в чат

## Настройка инлайн-режима

Для работы инлайн-режима нужно включить его в [@BotFather](https://t.me/BotFather):

1. Откройте [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/setinline`
3. Выберите вашего бота
4. Отправьте короткое описание (например: "Цитаты Ильи")
5. Отправьте текст-заголовок для кнопки (например: "Отправить цитату")

## Переменные окружения

- `BOT_TOKEN` - токен бота от BotFather (обязательно)
- `FILES_BASE_URL` - базовый HTTPS URL для доступа к аудиофайлам (опционально, по умолчанию запускается локальный сервер)
- `FILES_PORT` - порт для локального файлового сервера (по умолчанию 3001)

## Технологии

- TypeScript
- Telegraf (библиотека для Telegram Bot API)
- Node.js
